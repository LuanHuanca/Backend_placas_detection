# Backend - Sistema de DetecciÃ³n de Placas Vehiculares

## ğŸš€ Funcionalidades Principales
- **Procesamiento de video en tiempo real** (15-30 FPS)
- **DetecciÃ³n de vehÃ­culos** usando modelos YOLO/SSD
- **Reconocimiento OCR de placas** (Tesseract/EasyOCR)
- ValidaciÃ³n de formato de placas (Regex)
- **Almacenamiento en MySQL** con registro histÃ³rico
- **WebSockets** para alertas en tiempo real
- API REST documentada con Swagger/Redoc

## ğŸ›  Stack TecnolÃ³gico
| TecnologÃ­a         | Uso                              |
|--------------------|----------------------------------|
| **FastAPI**        | Framework principal del backend |
| **OpenCV**         | Procesamiento de video/frames   |
| **PyTesseract**    | OCR para lectura de placas      |
| **YOLOv8**         | Modelo de detecciÃ³n de objetos  |
| **SQLAlchemy**     | ORM para MySQL                   |
| **WebSockets**     | ComunicaciÃ³n en tiempo real     |
| **Uvicorn**        | Servidor ASGI                   |

## ğŸ“¥ InstalaciÃ³n

### Requisitos Previos
- Python 3.9+
- MySQL 8+
- Tesseract OCR instalado ([GuÃ­a de instalaciÃ³n](https://tesseract-ocr.github.io/tessdoc/Installation.html))
- Git

### Pasos de ConfiguraciÃ³n
1. **Clonar repositorio:**
```bash
git clone https://github.com/tu-usuario/deteccion-placas.git
cd deteccion-placas/backend
```
2. **Crear entorno virtual:**

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows
```
3. **Instalar dependencias:**

```bash
pip install -r requirements.txt
```
4. **Configurar base de datos:**

```sql
CREATE DATABASE placas_db;
-- Ejecutar script SQL proporcionado en /database/schema.sql
```
5. **Configurar variables de entorno (.env):**

```sql
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=tu_password_mysql
DB_NAME=placas_db
```
6. **Iniciar servidor:**

```bash
uvicorn app.main:app --reload
```

## ğŸŒ Endpoints Clave

| MÃ©todo   | Endpoint                     | DescripciÃ³n                                  |
|----------|------------------------------|----------------------------------------------|
| POST     | `/detecciones/procesar-video`| Subir video para anÃ¡lisis (MP4, AVI)         |
| GET      | `/placas`                    | Listar todas las placas detectadas           |
| GET      | `/detecciones/{id}`          | Obtener detalles de una detecciÃ³n especÃ­fica |
| WS       | `/alertas/ws`                | Canal WebSocket para recibir alertas         |

## ğŸ“„ DocumentaciÃ³n API
- **Swagger UI:** http://localhost:8000/docs  
- **Redoc:** http://localhost:8000/redoc  

## ğŸ§ª Ejemplos de Uso

### 1. Procesar video
```bash
curl -X POST -F "file=@trafico.mp4" http://localhost:8000/detecciones/procesar-video?camara_id=1
```
### ğŸ”§ Estructura de Carpetas
```bash
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/          # ConfiguraciÃ³n y seguridad
â”‚   â”œâ”€â”€ db/            # Modelos y conexiÃ³n MySQL
â”‚   â”œâ”€â”€ routes/        # Endpoints API
â”‚   â”œâ”€â”€ services/      # LÃ³gica de negocio (OCR, video processing)
â”‚   â””â”€â”€ main.py        # Punto de entrada
â”œâ”€â”€ requirements.txt
â””â”€â”€ .env.example
```

### âš ï¸ Notas Importantes
* Modelos YOLO: Colocar los archivos .weights en /app/services/models

* Tesseract: Verificar que estÃ© en el PATH del sistema

*  Async: Usar async/await para operaciones I/O intensivas

* Seguridad: No exponer endpoints sin autenticaciÃ³n en producciÃ³n


Este formato incluye:
1. Tabla responsive para endpoints
2. Sintaxis de cÃ³digo con highlighting apropiado
3. Estructura de directorios en formato Ã¡rbol
4. Lista de notas importantes con formato claro
5. Enlaces funcionales a la documentaciÃ³n
6. SeparaciÃ³n visual clara entre secciones